import{c as E,r as m,j as e,H as k,g as u,t as l}from"./app-Bi53cwRe.js";import{M as D,B as S}from"./MainLayout-jKifpoFS.js";import{H as F}from"./Header-uQBK6Lvz.js";import{B as g}from"./use-theme-CGehCXYH.js";import{I as n}from"./input-P5n5ME8U.js";import{L as i}from"./label-COTh75sX.js";import{T as R}from"./textarea-Co08D1Wy.js";import{C as j,a as f,b,d as N,c as v}from"./card-CuJFQQ2i.js";import{S as G}from"./save-_R3qz_cD.js";import{U as y}from"./upload-Dc57_-HE.js";/* empty css            */import"./index-PFpZpo28.js";import"./user-DFNe86Sn.js";const I=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],P=E("image",I);function W({settings:r}){const d=m.useRef(null),[a,c]=m.useState({business_name:r.business_name||"",tax_id:r.tax_id||"",address:r.address||"",phone:r.phone||"",email:r.email||""}),[x,p]=m.useState(r.logo_path?`/storage/${r.logo_path}`:null),C=s=>{s.preventDefault(),u.put("/configuracion/negocio",a,{onSuccess:()=>{l.success("Configuración actualizada correctamente")},onError:o=>{const t=Object.values(o)[0];l.error(t)}})},w=s=>{const o=s.target.files?.[0];if(!o)return;if(!o.type.match(/image\/(jpeg|jpg|png)/)){l.error("Solo se permiten imágenes JPG, JPEG o PNG");return}if(o.size>2*1024*1024){l.error("La imagen no debe superar 2MB");return}const t=new FileReader;t.onloadend=()=>{p(t.result)},t.readAsDataURL(o);const h=new FormData;h.append("logo",o),u.post("/configuracion/negocio/logo",h,{onSuccess:()=>{l.success("Logo actualizado correctamente"),u.reload({only:["settings"]})},onError:_=>{const L=Object.values(_)[0];l.error(L),p(r.logo_path?`/storage/${r.logo_path}`:null)}})};return e.jsxs(D,{children:[e.jsx(k,{title:"Datos del Negocio"}),e.jsxs("div",{className:"flex-1 flex flex-col h-full bg-background",children:[e.jsx(F,{title:"Datos del Negocio",subtitle:"Configura tu logo y los datos que verán tus clientes en el ticket."}),e.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:e.jsx("div",{className:"max-w-6xl mx-auto space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(j,{className:"border shadow-sm",children:[e.jsxs(f,{className:"border-b bg-card pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-blue-600 mb-1",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(S,{className:"w-5 h-5"})}),e.jsx(b,{className:"text-lg text-foreground",children:"Información General"})]}),e.jsx(N,{children:"Estos datos son públicos en tus comprobantes."})]}),e.jsx(v,{className:"pt-6",children:e.jsxs("form",{onSubmit:C,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"business_name",children:"Nombre del Negocio *"}),e.jsx(n,{id:"business_name",value:a.business_name,onChange:s=>c({...a,business_name:s.target.value}),placeholder:"Ej: Kiosco El Rincón",required:!0,className:"bg-muted/50"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"tax_id",children:"CUIT / RUT"}),e.jsx(n,{id:"tax_id",value:a.tax_id,onChange:s=>c({...a,tax_id:s.target.value}),placeholder:"Ej: 20-12345678-9",className:"bg-muted/50"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"address",children:"Dirección Comercial"}),e.jsx(R,{id:"address",value:a.address,onChange:s=>c({...a,address:s.target.value}),placeholder:"Ej: Av. Libertador 1234, Local 5",rows:3,className:"bg-muted/50 resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"phone",children:"Teléfono / WhatsApp"}),e.jsx(n,{id:"phone",value:a.phone,onChange:s=>c({...a,phone:s.target.value}),placeholder:"+54 11 ...",className:"bg-muted/50"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"email",children:"Correo Electrónico"}),e.jsx(n,{id:"email",type:"email",value:a.email,onChange:s=>c({...a,email:s.target.value}),placeholder:"contacto@negocio.com",className:"bg-muted/50"})]})]}),e.jsx("div",{className:"pt-4 flex justify-end",children:e.jsxs(g,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white shadow-md gap-3 transition-all duration-200 hover:scale-105",children:[e.jsx(G,{className:"w-6 h-6"}),"Guardar Cambios"]})})]})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(j,{className:"border shadow-sm h-full",children:[e.jsxs(f,{className:"border-b bg-card pb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-purple-600 mb-1",children:[e.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:e.jsx(P,{className:"w-5 h-5"})}),e.jsx(b,{className:"text-lg text-foreground",children:"Logo"})]}),e.jsx(N,{children:"Visible en ticket y sistema."})]}),e.jsxs(v,{className:"pt-6 flex flex-col items-center space-y-6",children:[e.jsxs("div",{className:"relative group w-full aspect-square max-w-[250px] bg-muted rounded-xl border-2 border-dashed border-border flex items-center justify-center overflow-hidden hover:border-ring transition-colors cursor-pointer",onClick:()=>d.current?.click(),children:[x?e.jsx("img",{src:x,alt:"Logo actual",className:"w-full h-full object-contain p-4"}):e.jsxs("div",{className:"text-center p-6 text-muted-foreground",children:[e.jsx(y,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-sm font-medium",children:"Clic para subir imagen"}),e.jsx("p",{className:"text-xs mt-1",children:"PNG, JPG (Máx 2MB)"})]}),e.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("p",{className:"text-white font-medium flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"})," ","Cambiar"]})})]}),e.jsx("input",{ref:d,type:"file",accept:"image/jpeg,image/jpg,image/png",onChange:w,className:"hidden"}),e.jsxs("div",{className:"w-full",children:[e.jsx(g,{type:"button",variant:"outline",className:"w-full border-border hover:bg-accent",onClick:()=>d.current?.click(),children:"Seleccionar Archivo"}),e.jsx("p",{className:"text-xs text-muted-foreground text-center mt-3",children:"Recomendado: Formato cuadrado (500x500px)"})]})]})]})})]})})})]})]})}export{W as default};
