import{f as M,r as n,j as e,H as Q,g as p}from"./app-Bi53cwRe.js";import{M as q}from"./MainLayout-jKifpoFS.js";import{H as J}from"./Header-uQBK6Lvz.js";import{B as a}from"./use-theme-CGehCXYH.js";import{I as o}from"./input-P5n5ME8U.js";import{L as j}from"./label-COTh75sX.js";import{T as K,a as W,b as v,c as r,d as X,e as l}from"./table-Cy4khzhc.js";import{D as y,a as T,b as E,c as k,d as O}from"./dialog-DHyflgsl.js";import{C,c as b}from"./card-CuJFQQ2i.js";import{T as Y,A as Z,a as ee,b as se,c as ae,d as le,e as te}from"./alert-dialog-BmfwfED2.js";import{U as A}from"./user-DFNe86Sn.js";import{S as ne}from"./shopping-bag-CnZ-0TzD.js";import{D as re}from"./dollar-sign-CsZ9eZSj.js";import{S as ie}from"./search-BsQ32vNM.js";import{P as oe}from"./plus-ju-uYPjB.js";import{E as de}from"./eye-C8kWa7iw.js";import{S as ce}from"./square-pen-wt1o4etz.js";import{P as me}from"./phone-RrKqHJYt.js";/* empty css            */import"./index-PFpZpo28.js";function He({clients:d}){const{toast:c}=M(),[u,H]=n.useState(""),[I,m]=n.useState(!1),[F,h]=n.useState(!1),[L,x]=n.useState(!1),[w,D]=n.useState(null),[i,g]=n.useState({name:"",phone:""}),[t,f]=n.useState({id:0,name:"",phone:""}),S=d.filter(s=>s.name.toLowerCase().includes(u.toLowerCase())||s.phone&&s.phone.includes(u)),_=()=>{if(!i.name){c({title:"Error",description:"El nombre es obligatorio",variant:"destructive"});return}p.post("/clientes",i,{onSuccess:()=>{m(!1),g({name:"",phone:""}),c({title:"Cliente creado",description:"Se ha registrado correctamente"})}})},B=s=>{f({id:s.id,name:s.name,phone:s.phone||""}),h(!0)},P=()=>{p.put(`/clientes/${t.id}`,{name:t.name,phone:t.phone},{onSuccess:()=>{h(!1),c({title:"Cliente actualizado",description:"Los cambios se guardaron correctamente"})}})},$=s=>{D(s),x(!0)},z=()=>{w&&p.delete(`/clientes/${w}`,{onSuccess:()=>{x(!1),D(null),c({title:"Cliente eliminado",description:"El cliente ha sido removido"})}})},V=s=>{p.visit(`/clientes/${s}`)},G=d.length,R=d.reduce((s,N)=>s+N.total_compras,0),U=d.reduce((s,N)=>s+N.total_gastado,0);return e.jsxs(q,{children:[e.jsx(Q,{title:"Clientes"}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(J,{title:"Clientes",subtitle:"Historial de compras y datos de contacto."}),e.jsx("main",{className:"flex-1 p-6 bg-background",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(C,{className:"transition-all duration-200 hover:shadow-lg hover:-translate-y-1",children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Clientes"}),e.jsx("p",{className:"text-2xl font-bold",children:G})]}),e.jsx("div",{className:"p-3 rounded-lg bg-blue-100 dark:bg-blue-900/20 transition-transform duration-200 hover:scale-110",children:e.jsx(A,{className:"w-8 h-8 text-blue-500"})})]})})}),e.jsx(C,{className:"transition-all duration-200 hover:shadow-lg hover:-translate-y-1",children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ventas Totales"}),e.jsx("p",{className:"text-2xl font-bold",children:R})]}),e.jsx("div",{className:"p-3 rounded-lg bg-green-100 dark:bg-green-900/20 transition-transform duration-200 hover:scale-110",children:e.jsx(ne,{className:"w-8 h-8 text-green-500"})})]})})}),e.jsx(C,{className:"transition-all duration-200 hover:shadow-lg hover:-translate-y-1",children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ingresos Totales"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",U.toFixed(2)]})]}),e.jsx("div",{className:"p-3 rounded-lg bg-purple-100 dark:bg-purple-900/20 transition-transform duration-200 hover:scale-110",children:e.jsx(re,{className:"w-8 h-8 text-purple-500"})})]})})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(o,{placeholder:"Buscar por nombre o teléfono...",value:u,onChange:s=>H(s.target.value),className:"pl-10"})]}),e.jsxs(a,{onClick:()=>m(!0),className:"flex items-center gap-3 transition-all duration-200 hover:scale-105",children:[e.jsx(oe,{className:"w-6 h-6"}),"Nuevo Cliente"]})]}),e.jsx("div",{className:"bg-card rounded-lg border border-border",children:e.jsxs(K,{children:[e.jsx(W,{children:e.jsxs(v,{children:[e.jsx(r,{children:"#"}),e.jsx(r,{children:"Nombre"}),e.jsx(r,{children:"Teléfono"}),e.jsx(r,{children:"Total Compras"}),e.jsx(r,{children:"Total Gastado"}),e.jsx(r,{children:"Registrado"}),e.jsx(r,{children:"Opciones"})]})}),e.jsx(X,{children:S.length===0?e.jsx(v,{children:e.jsx(l,{colSpan:7,className:"text-center text-muted-foreground",children:"No se encontraron clientes"})}):S.map(s=>e.jsxs(v,{children:[e.jsx(l,{children:s.id}),e.jsx(l,{className:"font-medium",children:s.name}),e.jsx(l,{children:s.phone||"Sin teléfono"}),e.jsx(l,{children:s.total_compras}),e.jsxs(l,{className:"font-semibold text-green-600",children:["$",s.total_gastado.toFixed(2)]}),e.jsx(l,{className:"text-sm text-muted-foreground",children:s.created_at}),e.jsx(l,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(a,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",title:"Ver detalles",onClick:()=>V(s.id),children:e.jsx(de,{className:"w-4 h-4 text-blue-600"})}),e.jsx(a,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",title:"Editar cliente",onClick:()=>B(s),children:e.jsx(ce,{className:"w-4 h-4 text-warning"})}),e.jsx(a,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",title:"Eliminar cliente",onClick:()=>$(s.id),children:e.jsx(Y,{className:"w-4 h-4 text-destructive"})})]})})]},s.id))})]})})]})}),e.jsx(y,{open:I,onOpenChange:m,children:e.jsxs(T,{children:[e.jsx(E,{children:e.jsx(k,{children:"Nuevo Cliente"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{htmlFor:"name",children:[e.jsx(A,{className:"inline w-4 h-4 mr-2"}),"Nombre *"]}),e.jsx(o,{id:"name",placeholder:"Nombre completo",value:i.name,onChange:s=>g({...i,name:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(j,{htmlFor:"phone",children:[e.jsx(me,{className:"inline w-4 h-4 mr-2"}),"Teléfono*"]}),e.jsx(o,{id:"phone",placeholder:"Número de teléfono",value:i.phone,onChange:s=>g({...i,phone:s.target.value})})]})]}),e.jsxs(O,{children:[e.jsx(a,{variant:"ghost",onClick:()=>m(!1),children:"Cancelar"}),e.jsx(a,{onClick:_,className:"bg-success",children:"Guardar"})]})]})}),e.jsx(y,{open:F,onOpenChange:h,children:e.jsxs(T,{children:[e.jsx(E,{children:e.jsx(k,{children:"Editar Cliente"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"edit-name",children:"Nombre *"}),e.jsx(o,{id:"edit-name",placeholder:"Nombre completo",value:t.name,onChange:s=>f({...t,name:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"edit-phone",children:"Teléfono*"}),e.jsx(o,{id:"edit-phone",placeholder:"Número de teléfono",value:t.phone,onChange:s=>f({...t,phone:s.target.value})})]})]}),e.jsxs(O,{children:[e.jsx(a,{variant:"ghost",onClick:()=>h(!1),children:"Cancelar"}),e.jsx(a,{onClick:P,className:"bg-success",children:"Guardar Cambios"})]})]})}),e.jsx(Z,{open:L,onOpenChange:x,children:e.jsxs(ee,{children:[e.jsxs(se,{children:[e.jsx(ae,{children:"¿Eliminar cliente?"}),e.jsx(le,{children:"Esta acción no se puede deshacer. El cliente será eliminado permanentemente."})]}),e.jsxs(te,{children:[e.jsx(a,{variant:"ghost",onClick:()=>x(!1),children:"Cancelar"}),e.jsx(a,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:z,children:"Eliminar"})]})]})})]})]})}export{He as default};
