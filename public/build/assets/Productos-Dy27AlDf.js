import{c as oe,r as s,j as e,o as De,a as er,p as nt,q as rr,k as tr,R as ot,A as at,d as Ce,s as st,v as ae,b as v,P as q,w as ct,D as it,C as lt,x as dt,u as ut,e as $,f as pt,H as mt,X as ht,g as L}from"./app-Bi53cwRe.js";import{H as ft}from"./Header-uQBK6Lvz.js";import{B as b}from"./use-theme-CGehCXYH.js";import{I as P}from"./input-P5n5ME8U.js";import{u as xt}from"./useScannerWebSocket-C3sWXF0A.js";import{T as gt,a as vt,b as Ke,c as A,d as jt,e as T}from"./table-Cy4khzhc.js";import{D as me,a as he,b as fe,c as xe,d as ge}from"./dialog-DHyflgsl.js";import{T as bt,A as Ue,a as Be,b as Ve,c as ze,d as He,e as We}from"./alert-dialog-BmfwfED2.js";import{u as Ct}from"./index-DkYS_QLe.js";import{h as wt,a as yt,R as Nt,F as Mt,u as Xe}from"./index-PFpZpo28.js";import{c as nr,I as St,R as _t,C as Pe}from"./index-BJEn-lfB.js";import{C as Pt}from"./check-Dyfwx27W.js";import{L as M}from"./label-COTh75sX.js";import{T as Ye}from"./textarea-Co08D1Wy.js";import{S as Rt}from"./switch-CGf-p9DI.js";import{M as Et}from"./MainLayout-jKifpoFS.js";import{S as qe}from"./search-BsQ32vNM.js";import{U as Ze}from"./upload-Dc57_-HE.js";import{M as Dt}from"./minus-zEaVp_Tz.js";import{P as Re}from"./plus-ju-uYPjB.js";import{S as kt}from"./square-pen-wt1o4etz.js";/* empty css            */import"./user-DFNe86Sn.js";import"./index-DlbaUiBa.js";const It=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],At=oe("chevron-right",It);const Tt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ot=oe("circle",Tt);const Ft=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Je=oe("download",Ft);const Lt=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Gt=oe("file-spreadsheet",Lt);const $t=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Kt=oe("folder-plus",$t);function Ut(r){const n=Bt(r),t=s.forwardRef((o,c)=>{const{children:i,...p}=o,u=s.Children.toArray(i),f=u.find(zt);if(f){const h=f.props.children,m=u.map(d=>d===f?s.Children.count(h)>1?s.Children.only(null):s.isValidElement(h)?h.props.children:null:d);return e.jsx(n,{...p,ref:c,children:s.isValidElement(h)?s.cloneElement(h,void 0,m):null})}return e.jsx(n,{...p,ref:c,children:i})});return t.displayName=`${r}.Slot`,t}function Bt(r){const n=s.forwardRef((t,o)=>{const{children:c,...i}=t;if(s.isValidElement(c)){const p=Wt(c),u=Ht(i,c.props);return c.type!==s.Fragment&&(u.ref=o?De(o,p):p),s.cloneElement(c,u)}return s.Children.count(c)>1?s.Children.only(null):null});return n.displayName=`${r}.SlotClone`,n}var Vt=Symbol("radix.slottable");function zt(r){return s.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===Vt}function Ht(r,n){const t={...n};for(const o in n){const c=r[o],i=n[o];/^on[A-Z]/.test(o)?c&&i?t[o]=(...u)=>{const f=i(...u);return c(...u),f}:c&&(t[o]=c):o==="style"?t[o]={...c,...i}:o==="className"&&(t[o]=[c,i].filter(Boolean).join(" "))}return{...r,...t}}function Wt(r){let n=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning;return t?r.ref:(n=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var Ee=["Enter"," "],Xt=["ArrowDown","PageUp","Home"],or=["ArrowUp","PageDown","End"],Yt=[...Xt,...or],qt={ltr:[...Ee,"ArrowRight"],rtl:[...Ee,"ArrowLeft"]},Zt={ltr:["ArrowLeft"],rtl:["ArrowRight"]},se="Menu",[te,Jt,Qt]=nt(se),[H,ar]=er(se,[Qt,rr,nr]),we=rr(),sr=nr(),[en,W]=H(se),[rn,ce]=H(se),cr=r=>{const{__scopeMenu:n,open:t=!1,children:o,dir:c,onOpenChange:i,modal:p=!0}=r,u=we(n),[f,h]=s.useState(null),m=s.useRef(!1),d=tr(i),g=Ct(c);return s.useEffect(()=>{const w=()=>{m.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>m.current=!1;return document.addEventListener("keydown",w,{capture:!0}),()=>{document.removeEventListener("keydown",w,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),e.jsx(ot,{...u,children:e.jsx(en,{scope:n,open:t,onOpenChange:d,content:f,onContentChange:h,children:e.jsx(rn,{scope:n,onClose:s.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:m,dir:g,modal:p,children:o})})})};cr.displayName=se;var tn="MenuAnchor",ke=s.forwardRef((r,n)=>{const{__scopeMenu:t,...o}=r,c=we(t);return e.jsx(at,{...c,...o,ref:n})});ke.displayName=tn;var Ie="MenuPortal",[nn,ir]=H(Ie,{forceMount:void 0}),lr=r=>{const{__scopeMenu:n,forceMount:t,children:o,container:c}=r,i=W(Ie,n);return e.jsx(nn,{scope:n,forceMount:t,children:e.jsx(Ce,{present:t||i.open,children:e.jsx(st,{asChild:!0,container:c,children:o})})})};lr.displayName=Ie;var D="MenuContent",[on,Ae]=H(D),dr=s.forwardRef((r,n)=>{const t=ir(D,r.__scopeMenu),{forceMount:o=t.forceMount,...c}=r,i=W(D,r.__scopeMenu),p=ce(D,r.__scopeMenu);return e.jsx(te.Provider,{scope:r.__scopeMenu,children:e.jsx(Ce,{present:o||i.open,children:e.jsx(te.Slot,{scope:r.__scopeMenu,children:p.modal?e.jsx(an,{...c,ref:n}):e.jsx(sn,{...c,ref:n})})})})}),an=s.forwardRef((r,n)=>{const t=W(D,r.__scopeMenu),o=s.useRef(null),c=ae(n,o);return s.useEffect(()=>{const i=o.current;if(i)return wt(i)},[]),e.jsx(Te,{...r,ref:c,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:v(r.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),sn=s.forwardRef((r,n)=>{const t=W(D,r.__scopeMenu);return e.jsx(Te,{...r,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),cn=Ut("MenuContent.ScrollLock"),Te=s.forwardRef((r,n)=>{const{__scopeMenu:t,loop:o=!1,trapFocus:c,onOpenAutoFocus:i,onCloseAutoFocus:p,disableOutsidePointerEvents:u,onEntryFocus:f,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:d,onInteractOutside:g,onDismiss:w,disableOutsideScroll:j,...O}=r,K=W(D,t),k=ce(D,t),ie=we(t),Me=sr(t),X=Jt(t),[Se,U]=s.useState(null),B=s.useRef(null),le=ae(n,B,K.onContentChange),V=s.useRef(0),I=s.useRef(""),Z=s.useRef(0),de=s.useRef(null),E=s.useRef("right"),J=s.useRef(0),S=j?Nt:s.Fragment,_e=j?{as:cn,allowPinchZoom:!0}:void 0,x=l=>{const N=I.current+l,F=X().filter(_=>!_.disabled),z=document.activeElement,Q=F.find(_=>_.ref.current===z)?.textValue,Y=F.map(_=>_.textValue),ue=bn(Y,N,Q),G=F.find(_=>_.textValue===ue)?.ref.current;(function _(pe){I.current=pe,window.clearTimeout(V.current),pe!==""&&(V.current=window.setTimeout(()=>_(""),1e3))})(N),G&&setTimeout(()=>G.focus())};s.useEffect(()=>()=>window.clearTimeout(V.current),[]),yt();const y=s.useCallback(l=>E.current===de.current?.side&&wn(l,de.current?.area),[]);return e.jsx(on,{scope:t,searchRef:I,onItemEnter:s.useCallback(l=>{y(l)&&l.preventDefault()},[y]),onItemLeave:s.useCallback(l=>{y(l)||(B.current?.focus(),U(null))},[y]),onTriggerLeave:s.useCallback(l=>{y(l)&&l.preventDefault()},[y]),pointerGraceTimerRef:Z,onPointerGraceIntentChange:s.useCallback(l=>{de.current=l},[]),children:e.jsx(S,{..._e,children:e.jsx(Mt,{asChild:!0,trapped:c,onMountAutoFocus:v(i,l=>{l.preventDefault(),B.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:p,children:e.jsx(it,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:d,onInteractOutside:g,onDismiss:w,children:e.jsx(_t,{asChild:!0,...Me,dir:k.dir,orientation:"vertical",loop:o,currentTabStopId:Se,onCurrentTabStopIdChange:U,onEntryFocus:v(f,l=>{k.isUsingKeyboardRef.current||l.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(lt,{role:"menu","aria-orientation":"vertical","data-state":Sr(K.open),"data-radix-menu-content":"",dir:k.dir,...ie,...O,ref:le,style:{outline:"none",...O.style},onKeyDown:v(O.onKeyDown,l=>{const F=l.target.closest("[data-radix-menu-content]")===l.currentTarget,z=l.ctrlKey||l.altKey||l.metaKey,Q=l.key.length===1;F&&(l.key==="Tab"&&l.preventDefault(),!z&&Q&&x(l.key));const Y=B.current;if(l.target!==Y||!Yt.includes(l.key))return;l.preventDefault();const G=X().filter(_=>!_.disabled).map(_=>_.ref.current);or.includes(l.key)&&G.reverse(),vn(G)}),onBlur:v(r.onBlur,l=>{l.currentTarget.contains(l.target)||(window.clearTimeout(V.current),I.current="")}),onPointerMove:v(r.onPointerMove,ne(l=>{const N=l.target,F=J.current!==l.clientX;if(l.currentTarget.contains(N)&&F){const z=l.clientX>J.current?"right":"left";E.current=z,J.current=l.clientX}}))})})})})})})});dr.displayName=D;var ln="MenuGroup",Oe=s.forwardRef((r,n)=>{const{__scopeMenu:t,...o}=r;return e.jsx(q.div,{role:"group",...o,ref:n})});Oe.displayName=ln;var dn="MenuLabel",ur=s.forwardRef((r,n)=>{const{__scopeMenu:t,...o}=r;return e.jsx(q.div,{...o,ref:n})});ur.displayName=dn;var je="MenuItem",Qe="menu.itemSelect",ye=s.forwardRef((r,n)=>{const{disabled:t=!1,onSelect:o,...c}=r,i=s.useRef(null),p=ce(je,r.__scopeMenu),u=Ae(je,r.__scopeMenu),f=ae(n,i),h=s.useRef(!1),m=()=>{const d=i.current;if(!t&&d){const g=new CustomEvent(Qe,{bubbles:!0,cancelable:!0});d.addEventListener(Qe,w=>o?.(w),{once:!0}),ct(d,g),g.defaultPrevented?h.current=!1:p.onClose()}};return e.jsx(pr,{...c,ref:f,disabled:t,onClick:v(r.onClick,m),onPointerDown:d=>{r.onPointerDown?.(d),h.current=!0},onPointerUp:v(r.onPointerUp,d=>{h.current||d.currentTarget?.click()}),onKeyDown:v(r.onKeyDown,d=>{const g=u.searchRef.current!=="";t||g&&d.key===" "||Ee.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});ye.displayName=je;var pr=s.forwardRef((r,n)=>{const{__scopeMenu:t,disabled:o=!1,textValue:c,...i}=r,p=Ae(je,t),u=sr(t),f=s.useRef(null),h=ae(n,f),[m,d]=s.useState(!1),[g,w]=s.useState("");return s.useEffect(()=>{const j=f.current;j&&w((j.textContent??"").trim())},[i.children]),e.jsx(te.ItemSlot,{scope:t,disabled:o,textValue:c??g,children:e.jsx(St,{asChild:!0,...u,focusable:!o,children:e.jsx(q.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...i,ref:h,onPointerMove:v(r.onPointerMove,ne(j=>{o?p.onItemLeave(j):(p.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:v(r.onPointerLeave,ne(j=>p.onItemLeave(j))),onFocus:v(r.onFocus,()=>d(!0)),onBlur:v(r.onBlur,()=>d(!1))})})})}),un="MenuCheckboxItem",mr=s.forwardRef((r,n)=>{const{checked:t=!1,onCheckedChange:o,...c}=r;return e.jsx(vr,{scope:r.__scopeMenu,checked:t,children:e.jsx(ye,{role:"menuitemcheckbox","aria-checked":be(t)?"mixed":t,...c,ref:n,"data-state":Le(t),onSelect:v(c.onSelect,()=>o?.(be(t)?!0:!t),{checkForDefaultPrevented:!1})})})});mr.displayName=un;var hr="MenuRadioGroup",[pn,mn]=H(hr,{value:void 0,onValueChange:()=>{}}),fr=s.forwardRef((r,n)=>{const{value:t,onValueChange:o,...c}=r,i=tr(o);return e.jsx(pn,{scope:r.__scopeMenu,value:t,onValueChange:i,children:e.jsx(Oe,{...c,ref:n})})});fr.displayName=hr;var xr="MenuRadioItem",gr=s.forwardRef((r,n)=>{const{value:t,...o}=r,c=mn(xr,r.__scopeMenu),i=t===c.value;return e.jsx(vr,{scope:r.__scopeMenu,checked:i,children:e.jsx(ye,{role:"menuitemradio","aria-checked":i,...o,ref:n,"data-state":Le(i),onSelect:v(o.onSelect,()=>c.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});gr.displayName=xr;var Fe="MenuItemIndicator",[vr,hn]=H(Fe,{checked:!1}),jr=s.forwardRef((r,n)=>{const{__scopeMenu:t,forceMount:o,...c}=r,i=hn(Fe,t);return e.jsx(Ce,{present:o||be(i.checked)||i.checked===!0,children:e.jsx(q.span,{...c,ref:n,"data-state":Le(i.checked)})})});jr.displayName=Fe;var fn="MenuSeparator",br=s.forwardRef((r,n)=>{const{__scopeMenu:t,...o}=r;return e.jsx(q.div,{role:"separator","aria-orientation":"horizontal",...o,ref:n})});br.displayName=fn;var xn="MenuArrow",Cr=s.forwardRef((r,n)=>{const{__scopeMenu:t,...o}=r,c=we(t);return e.jsx(dt,{...c,...o,ref:n})});Cr.displayName=xn;var gn="MenuSub",[Fo,wr]=H(gn),re="MenuSubTrigger",yr=s.forwardRef((r,n)=>{const t=W(re,r.__scopeMenu),o=ce(re,r.__scopeMenu),c=wr(re,r.__scopeMenu),i=Ae(re,r.__scopeMenu),p=s.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:f}=i,h={__scopeMenu:r.__scopeMenu},m=s.useCallback(()=>{p.current&&window.clearTimeout(p.current),p.current=null},[]);return s.useEffect(()=>m,[m]),s.useEffect(()=>{const d=u.current;return()=>{window.clearTimeout(d),f(null)}},[u,f]),e.jsx(ke,{asChild:!0,...h,children:e.jsx(pr,{id:c.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":c.contentId,"data-state":Sr(t.open),...r,ref:De(n,c.onTriggerChange),onClick:d=>{r.onClick?.(d),!(r.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:v(r.onPointerMove,ne(d=>{i.onItemEnter(d),!d.defaultPrevented&&!r.disabled&&!t.open&&!p.current&&(i.onPointerGraceIntentChange(null),p.current=window.setTimeout(()=>{t.onOpenChange(!0),m()},100))})),onPointerLeave:v(r.onPointerLeave,ne(d=>{m();const g=t.content?.getBoundingClientRect();if(g){const w=t.content?.dataset.side,j=w==="right",O=j?-5:5,K=g[j?"left":"right"],k=g[j?"right":"left"];i.onPointerGraceIntentChange({area:[{x:d.clientX+O,y:d.clientY},{x:K,y:g.top},{x:k,y:g.top},{x:k,y:g.bottom},{x:K,y:g.bottom}],side:w}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(d),d.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:v(r.onKeyDown,d=>{const g=i.searchRef.current!=="";r.disabled||g&&d.key===" "||qt[o.dir].includes(d.key)&&(t.onOpenChange(!0),t.content?.focus(),d.preventDefault())})})})});yr.displayName=re;var Nr="MenuSubContent",Mr=s.forwardRef((r,n)=>{const t=ir(D,r.__scopeMenu),{forceMount:o=t.forceMount,...c}=r,i=W(D,r.__scopeMenu),p=ce(D,r.__scopeMenu),u=wr(Nr,r.__scopeMenu),f=s.useRef(null),h=ae(n,f);return e.jsx(te.Provider,{scope:r.__scopeMenu,children:e.jsx(Ce,{present:o||i.open,children:e.jsx(te.Slot,{scope:r.__scopeMenu,children:e.jsx(Te,{id:u.contentId,"aria-labelledby":u.triggerId,...c,ref:h,align:"start",side:p.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:m=>{p.isUsingKeyboardRef.current&&f.current?.focus(),m.preventDefault()},onCloseAutoFocus:m=>m.preventDefault(),onFocusOutside:v(r.onFocusOutside,m=>{m.target!==u.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:v(r.onEscapeKeyDown,m=>{p.onClose(),m.preventDefault()}),onKeyDown:v(r.onKeyDown,m=>{const d=m.currentTarget.contains(m.target),g=Zt[p.dir].includes(m.key);d&&g&&(i.onOpenChange(!1),u.trigger?.focus(),m.preventDefault())})})})})})});Mr.displayName=Nr;function Sr(r){return r?"open":"closed"}function be(r){return r==="indeterminate"}function Le(r){return be(r)?"indeterminate":r?"checked":"unchecked"}function vn(r){const n=document.activeElement;for(const t of r)if(t===n||(t.focus(),document.activeElement!==n))return}function jn(r,n){return r.map((t,o)=>r[(n+o)%r.length])}function bn(r,n,t){const c=n.length>1&&Array.from(n).every(h=>h===n[0])?n[0]:n,i=t?r.indexOf(t):-1;let p=jn(r,Math.max(i,0));c.length===1&&(p=p.filter(h=>h!==t));const f=p.find(h=>h.toLowerCase().startsWith(c.toLowerCase()));return f!==t?f:void 0}function Cn(r,n){const{x:t,y:o}=r;let c=!1;for(let i=0,p=n.length-1;i<n.length;p=i++){const u=n[i],f=n[p],h=u.x,m=u.y,d=f.x,g=f.y;m>o!=g>o&&t<(d-h)*(o-m)/(g-m)+h&&(c=!c)}return c}function wn(r,n){if(!n)return!1;const t={x:r.clientX,y:r.clientY};return Cn(t,n)}function ne(r){return n=>n.pointerType==="mouse"?r(n):void 0}var yn=cr,Nn=ke,Mn=lr,Sn=dr,_n=Oe,Pn=ur,Rn=ye,En=mr,Dn=fr,kn=gr,In=jr,An=br,Tn=Cr,On=yr,Fn=Mr,Ne="DropdownMenu",[Ln]=er(Ne,[ar]),R=ar(),[Gn,_r]=Ln(Ne),Pr=r=>{const{__scopeDropdownMenu:n,children:t,dir:o,open:c,defaultOpen:i,onOpenChange:p,modal:u=!0}=r,f=R(n),h=s.useRef(null),[m,d]=ut({prop:c,defaultProp:i??!1,onChange:p,caller:Ne});return e.jsx(Gn,{scope:n,triggerId:Xe(),triggerRef:h,contentId:Xe(),open:m,onOpenChange:d,onOpenToggle:s.useCallback(()=>d(g=>!g),[d]),modal:u,children:e.jsx(yn,{...f,open:m,onOpenChange:d,dir:o,modal:u,children:t})})};Pr.displayName=Ne;var Rr="DropdownMenuTrigger",Er=s.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,disabled:o=!1,...c}=r,i=_r(Rr,t),p=R(t);return e.jsx(Nn,{asChild:!0,...p,children:e.jsx(q.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...c,ref:De(n,i.triggerRef),onPointerDown:v(r.onPointerDown,u=>{!o&&u.button===0&&u.ctrlKey===!1&&(i.onOpenToggle(),i.open||u.preventDefault())}),onKeyDown:v(r.onKeyDown,u=>{o||(["Enter"," "].includes(u.key)&&i.onOpenToggle(),u.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});Er.displayName=Rr;var $n="DropdownMenuPortal",Dr=r=>{const{__scopeDropdownMenu:n,...t}=r,o=R(n);return e.jsx(Mn,{...o,...t})};Dr.displayName=$n;var kr="DropdownMenuContent",Ir=s.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...o}=r,c=_r(kr,t),i=R(t),p=s.useRef(!1);return e.jsx(Sn,{id:c.contentId,"aria-labelledby":c.triggerId,...i,...o,ref:n,onCloseAutoFocus:v(r.onCloseAutoFocus,u=>{p.current||c.triggerRef.current?.focus(),p.current=!1,u.preventDefault()}),onInteractOutside:v(r.onInteractOutside,u=>{const f=u.detail.originalEvent,h=f.button===0&&f.ctrlKey===!0,m=f.button===2||h;(!c.modal||m)&&(p.current=!0)}),style:{...r.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Ir.displayName=kr;var Kn="DropdownMenuGroup",Un=s.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...o}=r,c=R(t);return e.jsx(_n,{...c,...o,ref:n})});Un.displayName=Kn;var Bn="DropdownMenuLabel",Ar=s.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...o}=r,c=R(t);return e.jsx(Pn,{...c,...o,ref:n})});Ar.displayName=Bn;var Vn="DropdownMenuItem",Tr=s.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...o}=r,c=R(t);return e.jsx(Rn,{...c,...o,ref:n})});Tr.displayName=Vn;var zn="DropdownMenuCheckboxItem",Or=s.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...o}=r,c=R(t);return e.jsx(En,{...c,...o,ref:n})});Or.displayName=zn;var Hn="DropdownMenuRadioGroup",Wn=s.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...o}=r,c=R(t);return e.jsx(Dn,{...c,...o,ref:n})});Wn.displayName=Hn;var Xn="DropdownMenuRadioItem",Fr=s.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...o}=r,c=R(t);return e.jsx(kn,{...c,...o,ref:n})});Fr.displayName=Xn;var Yn="DropdownMenuItemIndicator",Lr=s.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...o}=r,c=R(t);return e.jsx(In,{...c,...o,ref:n})});Lr.displayName=Yn;var qn="DropdownMenuSeparator",Gr=s.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...o}=r,c=R(t);return e.jsx(An,{...c,...o,ref:n})});Gr.displayName=qn;var Zn="DropdownMenuArrow",Jn=s.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...o}=r,c=R(t);return e.jsx(Tn,{...c,...o,ref:n})});Jn.displayName=Zn;var Qn="DropdownMenuSubTrigger",$r=s.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...o}=r,c=R(t);return e.jsx(On,{...c,...o,ref:n})});$r.displayName=Qn;var eo="DropdownMenuSubContent",Kr=s.forwardRef((r,n)=>{const{__scopeDropdownMenu:t,...o}=r,c=R(t);return e.jsx(Fn,{...c,...o,ref:n,style:{...r.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Kr.displayName=eo;var ro=Pr,to=Er,no=Dr,Ur=Ir,Br=Ar,Vr=Tr,zr=Or,Hr=Fr,Wr=Lr,Xr=Gr,Yr=$r,qr=Kr;const oo=ro,ao=to,so=s.forwardRef(({className:r,inset:n,children:t,...o},c)=>e.jsxs(Yr,{ref:c,className:$("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",n&&"pl-8",r),...o,children:[t,e.jsx(At,{className:"ml-auto h-4 w-4"})]}));so.displayName=Yr.displayName;const co=s.forwardRef(({className:r,...n},t)=>e.jsx(qr,{ref:t,className:$("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...n}));co.displayName=qr.displayName;const Zr=s.forwardRef(({className:r,sideOffset:n=4,...t},o)=>e.jsx(no,{children:e.jsx(Ur,{ref:o,sideOffset:n,className:$("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...t})}));Zr.displayName=Ur.displayName;const ve=s.forwardRef(({className:r,inset:n,...t},o)=>e.jsx(Vr,{ref:o,className:$("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",n&&"pl-8",r),...t}));ve.displayName=Vr.displayName;const io=s.forwardRef(({className:r,children:n,checked:t,...o},c)=>e.jsxs(zr,{ref:c,className:$("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",r),checked:t,...o,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Wr,{children:e.jsx(Pt,{className:"h-4 w-4"})})}),n]}));io.displayName=zr.displayName;const lo=s.forwardRef(({className:r,children:n,...t},o)=>e.jsxs(Hr,{ref:o,className:$("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",r),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Wr,{children:e.jsx(Ot,{className:"h-2 w-2 fill-current"})})}),n]}));lo.displayName=Hr.displayName;const uo=s.forwardRef(({className:r,inset:n,...t},o)=>e.jsx(Br,{ref:o,className:$("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",r),...t}));uo.displayName=Br.displayName;const po=s.forwardRef(({className:r,...n},t)=>e.jsx(Xr,{ref:t,className:$("-mx-1 my-1 h-px bg-muted",r),...n}));po.displayName=Xr.displayName;function Lo({products:r,categories:n,filters:t}){const{toast:o}=pt(),[c,i]=s.useState(!1),[p,u]=s.useState(!1),[f,h]=s.useState(!1),[m,d]=s.useState(!1),[g,w]=s.useState(!1),[j,O]=s.useState(null),[K,k]=s.useState(!1),[ie,Me]=s.useState(t.search||""),[X,Se]=s.useState(""),[U,B]=s.useState(""),[le,V]=s.useState(null),[I,Z]=s.useState(null);xt(a=>{const C=r.data.find(ee=>ee.barcode===a);C?(N({id:C.id,barcode:C.barcode||"",description:C.description,category_id:C.category_id?.toString()||"",purchasePrice:C.purchase_price.toString(),salePrice:C.sale_price.toString(),existence:C.stock.toString(),minStock:C.min_stock.toString()}),u(!0),o({title:" Editando producto",description:C.description,duration:2e3})):(y({barcode:a,description:"",category_id:"",purchasePrice:"",salePrice:"",existence:"0",minStock:"5"}),i(!0),o({title:"Nuevo producto",description:`Código: ${a}`,duration:2e3}))});const[E,J]=s.useState(()=>{const a=localStorage.getItem("profitMargin");return a?parseFloat(a):40}),[S,_e]=s.useState(()=>{const a=localStorage.getItem("autoCalculateEnabled");return a?JSON.parse(a):!0}),[x,y]=s.useState({barcode:"",description:"",category_id:"",purchasePrice:"",salePrice:"",existence:"",minStock:""}),[l,N]=s.useState({id:0,barcode:"",description:"",category_id:"",purchasePrice:"",salePrice:"",existence:"",minStock:""});s.useEffect(()=>{localStorage.setItem("profitMargin",E.toString())},[E]),s.useEffect(()=>{localStorage.setItem("autoCalculateEnabled",JSON.stringify(S))},[S]),s.useEffect(()=>{if(S&&x.purchasePrice){const a=parseFloat(x.purchasePrice);if(!isNaN(a)&&a>0){const C=a*(1+E/100);y(ee=>({...ee,salePrice:C.toFixed(2)}))}}},[x.purchasePrice,E,S]),s.useEffect(()=>{if(S&&l.purchasePrice){const a=parseFloat(l.purchasePrice);if(!isNaN(a)&&a>0){const C=a*(1+E/100);N(ee=>({...ee,salePrice:C.toFixed(2)}))}}},[l.purchasePrice,E,S]);const F=()=>{if(!x.description||!x.salePrice){o({title:"Error",description:"Completa los campos obligatorios",variant:"destructive"});return}L.post("/productos",{barcode:x.barcode,description:x.description,purchase_price:x.purchasePrice,sale_price:x.salePrice,stock:x.existence,min_stock:x.minStock,category_id:x.category_id},{onSuccess:()=>{i(!1),y({barcode:"",description:"",category_id:"",purchasePrice:"",salePrice:"",existence:"",minStock:""}),o({title:"Producto creado",description:"Se ha registrado correctamente"})}})},z=a=>{N({id:a.id,barcode:a.barcode||"",description:a.description,category_id:a.category_id?.toString()||"",purchasePrice:a.purchase_price.toString(),salePrice:a.sale_price.toString(),existence:a.stock.toString(),minStock:a.min_stock.toString()}),u(!0)},Q=()=>{L.put(`/productos/${l.id}`,{barcode:l.barcode,description:l.description,purchase_price:l.purchasePrice,sale_price:l.salePrice,stock:l.existence,min_stock:l.minStock,category_id:l.category_id},{onSuccess:()=>{u(!1),o({title:"Producto actualizado",description:"Los cambios se guardaron correctamente"})}})},Y=()=>{U.trim()&&L.post("/categorias",{name:U},{onSuccess:()=>{B(""),o({title:"Categoría agregada"})},preserveScroll:!0})},ue=a=>{O(a),w(!0)},G=(a,C)=>{L.post(`/productos/${a}/stock`,{quantity:C},{preserveScroll:!0,onSuccess:()=>{o({title:C>0?"Existencia aumentada":"Existencia reducida"})}})},_=a=>{V(a),d(!0)},pe=()=>{le&&L.delete(`/productos/${le}`,{onSuccess:()=>{d(!1),V(null),o({title:"Producto eliminado",description:"El producto ha sido removido del inventario"})}})},Jr=()=>{j&&L.delete(`/categorias/${j}`,{onSuccess:()=>{w(!1),O(null),o({title:"Categoría eliminada"})},preserveScroll:!0})},Qr=a=>{Me(a),(a.length>=3||a.length===0)&&L.get("/productos",{search:a},{preserveState:!0,preserveScroll:!0})},Ge=a=>{L.get("/productos",{page:a,search:ie},{preserveState:!0,preserveScroll:!0})},et=()=>{window.location.href="/productos/export",o({title:"Exportando productos",description:"La descarga comenzará en breve"})},rt=()=>{window.location.href="/productos/plantilla",o({title:"Descargando plantilla",description:"La plantilla de ejemplo se descargará ahora"})},tt=()=>{if(!I){o({title:"Error",description:"Por favor selecciona un archivo",variant:"destructive"});return}const a=new FormData;a.append("file",I),L.post("/productos/import",a,{onSuccess:()=>{k(!1),Z(null),o({title:"Productos importados",description:"Los productos se han importado exitosamente"})},onError:C=>{o({title:"Error al importar",description:C.file||"Hubo un error al importar los productos",variant:"destructive"})}})},$e=n.filter(a=>a.name.toLowerCase().includes(X.toLowerCase()));return e.jsxs(Et,{children:[e.jsx(mt,{title:"Productos"}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(ft,{title:"Productos",subtitle:"Agrega, organiza y controla todo lo que vendes."}),e.jsx("main",{className:"flex-1 p-6 bg-background",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-card border border-border rounded-lg p-4 mb-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Pe,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"font-semibold text-foreground",children:"Margen de Ganancia Automático"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Calcula automáticamente el precio de venta al ingresar el precio de compra"})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{htmlFor:"profit-margin",className:"text-sm font-medium whitespace-nowrap",children:"Margen:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{id:"profit-margin",type:"number",min:"0",max:"1000",step:"1",value:E,onChange:a=>J(parseFloat(a.target.value)||0),className:"w-20 text-center font-bold"}),e.jsx("span",{className:"text-lg font-semibold text-foreground",children:"%"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{htmlFor:"auto-calc-switch",className:"text-sm font-medium",children:S?"Activo":"Inactivo"}),e.jsx(Rt,{id:"auto-calc-switch",checked:S,onCheckedChange:_e})]})]})]})}),e.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(P,{placeholder:"Buscar un producto por su descripción o código de barras",value:ie,onChange:a=>Qr(a.target.value),className:"pl-10"})]}),e.jsxs(oo,{children:[e.jsx(ao,{asChild:!0,children:e.jsxs(b,{variant:"outline",className:"flex items-center gap-3 transition-all duration-200 hover:scale-105",children:[e.jsx(Gt,{className:"w-6 h-6"}),"Importar/Exportar"]})}),e.jsxs(Zr,{align:"end",children:[e.jsxs(ve,{onClick:()=>k(!0),children:[e.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Importar Productos"]}),e.jsxs(ve,{onClick:et,children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Exportar Productos"]}),e.jsxs(ve,{onClick:rt,children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Descargar Plantilla"]})]})]}),e.jsxs(b,{onClick:()=>h(!0),variant:"outline",className:"flex items-center gap-3 transition-all duration-200 hover:scale-105",children:[e.jsx(Kt,{className:"w-6 h-6"}),"Categorías"]})]}),e.jsxs("div",{className:"bg-card rounded-lg border border-border",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>Ge(r.current_page-1),disabled:r.current_page===1,children:e.jsx("span",{children:"←"})}),e.jsx("span",{className:"px-3 py-1 bg-primary text-primary-foreground rounded",children:r.current_page}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["de ",r.last_page]}),e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>Ge(r.current_page+1),disabled:r.current_page===r.last_page,children:e.jsx("span",{children:"→"})})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Mostrando ",r.from," - ",r.to," de"," ",r.total," productos"]})]}),e.jsxs(gt,{children:[e.jsx(vt,{children:e.jsxs(Ke,{children:[e.jsx(A,{children:"#"}),e.jsx(A,{children:"Código de barras"}),e.jsx(A,{children:"Descripción"}),e.jsx(A,{children:"Categoría"}),e.jsx(A,{children:"P. compra"}),e.jsx(A,{children:"P. venta"}),e.jsx(A,{children:"Utilidad"}),e.jsx(A,{children:"Existencia"}),e.jsx(A,{children:"Stock Minimo"}),e.jsx(A,{children:"Opciones"})]})}),e.jsx(jt,{children:r.data.map(a=>e.jsxs(Ke,{children:[e.jsx(T,{children:a.id}),e.jsx(T,{children:a.barcode||"S/C"}),e.jsx(T,{children:a.description}),e.jsx(T,{children:a.category?.name||"General"}),e.jsxs(T,{children:["$"," ",Number(a.purchase_price).toFixed(2)]}),e.jsxs(T,{children:["$"," ",Number(a.sale_price).toFixed(2)]}),e.jsxs(T,{className:"font-semibold text-green-600",children:["$"," ",(Number(a.sale_price)-Number(a.purchase_price)).toFixed(2)]}),e.jsx(T,{children:e.jsx("span",{className:a.stock<=a.min_stock?"text-red-500 font-bold":"",children:a.stock})}),e.jsx(T,{children:a.min_stock}),e.jsx(T,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",title:"Restar stock",onClick:()=>G(a.id,-1),children:e.jsx(Dt,{className:"w-4 h-4 text-warning"})}),e.jsx(b,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",title:"Agregar stock",onClick:()=>G(a.id,1),children:e.jsx(Re,{className:"w-4 h-4 text-info"})}),e.jsx(b,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",title:"Editar producto",onClick:()=>z(a),children:e.jsx(kt,{className:"w-4 h-4 text-warning"})}),e.jsx(b,{size:"sm",variant:"outline",className:"h-8 w-8 p-0",title:"Eliminar producto",onClick:()=>_(a.id),children:e.jsx(bt,{className:"w-4 h-4 text-destructive"})})]})})]},a.id))})]})]})]})}),e.jsx(b,{className:"fixed bottom-8 right-8 rounded-full w-14 h-14 shadow-lg transition-all duration-200 hover:scale-110",title:"Agregar producto",onClick:()=>i(!0),children:e.jsx(Re,{className:"w-6 h-6"})}),e.jsx(me,{open:c,onOpenChange:i,children:e.jsxs(he,{children:[e.jsx(fe,{children:e.jsx(xe,{children:"Registrar producto"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"barcode",children:"Código de barras *"}),e.jsx(P,{id:"barcode",value:x.barcode,onChange:a=>y({...x,barcode:a.target.value}),placeholder:"Código de barras"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"description",children:"Descripción"}),e.jsx(Ye,{id:"description",value:x.description,onChange:a=>y({...x,description:a.target.value}),placeholder:"Descripción del producto",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"purchase-price",children:"Precio de compra *"}),S&&x.purchasePrice&&e.jsx("div",{className:"text-xs",style:{height:"16px",visibility:"hidden"},children:"Espaciador"}),e.jsx(P,{id:"purchase-price",type:"number",step:"0.01",value:x.purchasePrice,onChange:a=>y({...x,purchasePrice:a.target.value}),placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"sale-price",children:"Precio de venta *"}),S&&x.purchasePrice&&e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(Pe,{className:"w-3 h-3 text-green-600 dark:text-green-400"}),e.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["Auto-calculado (+",E,"%)"]})]}),e.jsx(P,{id:"sale-price",type:"number",step:"0.01",value:x.salePrice,onChange:a=>y({...x,salePrice:a.target.value}),placeholder:"0.00",className:S&&x.purchasePrice?"bg-green-50 dark:bg-green-900/10 border-green-300 dark:border-green-700":""})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"stock",children:"Existencia *"}),e.jsx(P,{id:"stock",type:"number",value:x.existence,onChange:a=>y({...x,existence:a.target.value}),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"min-stock",children:"Stock mínimo *"}),e.jsx(P,{id:"min-stock",type:"number",value:x.minStock,onChange:a=>y({...x,minStock:a.target.value}),placeholder:"5"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"category",children:"Categoría"}),e.jsxs("select",{id:"category",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:x.category_id,onChange:a=>y({...x,category_id:a.target.value}),children:[e.jsx("option",{value:"",children:"Sin categoría"}),n.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]})]})]}),e.jsxs(ge,{children:[e.jsx(b,{variant:"ghost",onClick:()=>i(!1),children:"CERRAR"}),e.jsx(b,{onClick:F,className:"bg-success hover:bg-success/90",children:"GUARDAR"})]})]})}),e.jsx(me,{open:p,onOpenChange:u,children:e.jsxs(he,{children:[e.jsx(fe,{children:e.jsx(xe,{children:"Editar producto"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"edit-barcode",children:"Código de barras *"}),e.jsx(P,{id:"edit-barcode",value:l.barcode,onChange:a=>N({...l,barcode:a.target.value}),placeholder:"Código de barras"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"edit-description",children:"Descripción"}),e.jsx(Ye,{id:"edit-description",value:l.description,onChange:a=>N({...l,description:a.target.value}),placeholder:"Descripción del producto",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"edit-purchase-price",children:"Precio de compra *"}),S&&l.purchasePrice&&e.jsx("div",{className:"text-xs",style:{height:"16px",visibility:"hidden"},children:"Espaciador"}),e.jsx(P,{id:"edit-purchase-price",type:"number",step:"0.01",value:l.purchasePrice,onChange:a=>N({...l,purchasePrice:a.target.value}),placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"edit-sale-price",children:"Precio de venta *"}),S&&l.purchasePrice&&e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(Pe,{className:"w-3 h-3 text-green-600 dark:text-green-400"}),e.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["Auto-calculado (+",E,"%)"]})]}),e.jsx(P,{id:"edit-sale-price",type:"number",step:"0.01",value:l.salePrice,onChange:a=>N({...l,salePrice:a.target.value}),placeholder:"0.00",className:S&&l.purchasePrice?"bg-green-50 dark:bg-green-900/10 border-green-300 dark:border-green-700":""})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"edit-stock",children:"Existencia *"}),e.jsx(P,{id:"edit-stock",type:"number",value:l.existence,onChange:a=>N({...l,existence:a.target.value}),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"edit-min-stock",children:"Stock mínimo *"}),e.jsx(P,{id:"edit-min-stock",type:"number",value:l.minStock,onChange:a=>N({...l,minStock:a.target.value}),placeholder:"5"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{htmlFor:"edit-category",children:"Categoría"}),e.jsxs("select",{id:"edit-category",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:l.category_id,onChange:a=>N({...l,category_id:a.target.value}),children:[e.jsx("option",{value:"",children:"Sin categoría"}),n.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]})]})]}),e.jsxs(ge,{children:[e.jsx(b,{variant:"ghost",onClick:()=>u(!1),children:"CERRAR"}),e.jsx(b,{onClick:Q,className:"bg-success hover:bg-success/90",children:"GUARDAR"})]})]})}),e.jsx(me,{open:f,onOpenChange:h,children:e.jsxs(he,{className:"max-w-md",children:[e.jsx(fe,{children:e.jsx(xe,{children:"Gestionar Categorías"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(qe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(P,{placeholder:"Buscar categoría...",value:X,onChange:a=>Se(a.target.value),className:"pl-9"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{placeholder:"Nueva categoría",value:U,onChange:a=>B(a.target.value),onKeyPress:a=>a.key==="Enter"&&Y()}),e.jsx(b,{onClick:Y,disabled:!U.trim(),className:"bg-success hover:bg-success/90",title:"Agregar categoría",children:e.jsx(Re,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"border border-border rounded-lg max-h-64 overflow-y-auto",children:$e.length===0?e.jsx("div",{className:"p-8 text-center text-muted-foreground",children:X?"No se encontraron categorías":"No hay categorías"}):e.jsx("div",{className:"divide-y divide-border",children:$e.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-accent/50 transition-colors",children:[e.jsx("span",{className:"font-medium",children:a.name}),e.jsx(b,{size:"sm",variant:"ghost",title:"Eliminar categoría",onClick:()=>ue(a.id),className:"h-8 w-8 p-0 hover:bg-destructive/10 hover:text-destructive",children:e.jsx(ht,{className:"w-4 h-4"})})]},a.id))})})]}),e.jsx(ge,{children:e.jsx(b,{variant:"ghost",onClick:()=>h(!1),children:"CERRAR"})})]})}),e.jsx(Ue,{open:m,onOpenChange:d,children:e.jsxs(Be,{children:[e.jsxs(Ve,{children:[e.jsx(ze,{children:"¿Eliminar producto?"}),e.jsx(He,{children:"Esta acción no se puede deshacer. El producto será eliminado permanentemente del inventario."})]}),e.jsxs(We,{children:[e.jsx(b,{variant:"ghost",onClick:()=>d(!1),children:"CANCELAR"}),e.jsx(b,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:pe,children:"ELIMINAR"})]})]})}),e.jsx(Ue,{open:g,onOpenChange:w,children:e.jsxs(Be,{children:[e.jsxs(Ve,{children:[e.jsx(ze,{children:"¿Eliminar categoría?"}),e.jsx(He,{children:"Esta acción no se puede deshacer. La categoría será eliminada y los productos quedarán sin categoría."})]}),e.jsxs(We,{children:[e.jsx(b,{variant:"ghost",onClick:()=>w(!1),children:"CANCELAR"}),e.jsx(b,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:Jr,children:"ELIMINAR"})]})]})}),e.jsx(me,{open:K,onOpenChange:k,children:e.jsxs(he,{className:"max-w-md",children:[e.jsx(fe,{children:e.jsx(xe,{children:"Importar Productos"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{children:"Archivo Excel/CSV"}),e.jsx(P,{type:"file",accept:".xlsx,.xls,.csv",onChange:a=>Z(a.target.files?.[0]||null)}),I&&e.jsxs("p",{className:"text-sm text-green-600",children:["✓ Archivo seleccionado:"," ",I.name]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-md text-sm",children:[e.jsx("p",{className:"font-semibold mb-2 text-foreground",children:"Instrucciones:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300",children:[e.jsx("li",{children:"El archivo debe tener las columnas: Código de Barras, Descripción, Categoría, Precio Compra, Precio Venta, Stock, Stock Mínimo"}),e.jsx("li",{children:"La descripción y precio de venta son obligatorios"}),e.jsx("li",{children:"Las categorías se crearán automáticamente si no existen"}),e.jsx("li",{children:"Descarga la plantilla de ejemplo si tienes dudas"})]})]})]}),e.jsxs(ge,{children:[e.jsx(b,{variant:"outline",onClick:()=>{k(!1),Z(null)},children:"Cancelar"}),e.jsxs(b,{onClick:tt,disabled:!I,className:"gap-2",children:[e.jsx(Ze,{className:"w-4 h-4"}),"Importar"]})]})]})})]})]})}export{Lo as default};
